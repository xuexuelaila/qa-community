# 日历筛选功能演示指南

## 功能概览

根据您提供的参考图片，我们实现了一个功能完整的日历筛选系统，包括：

1. **双月视图日历** - 同时显示两个月份
2. **日期范围选择** - 支持选择开始和结束日期
3. **快捷选项** - 今天、昨天、最近7天、这个月、上个月、上个季度
4. **日期标记** - 显示有内容的日期
5. **范围预览** - 鼠标悬停时预览选择范围

## 演示步骤

### 场景1：航海日志 - 单日期选择

**目标**：快速跳转到特定日期查看当天的知识沉淀

1. 打开浏览器访问：http://localhost:3000

2. 点击页面右上角的日历图标（📅）

3. 日历弹窗会显示：
   - 左右两个月份的日历
   - 当前日期用蓝色圆圈标识
   - 有内容的日期底部有橙色小圆点

4. 点击任意日期，例如点击"1号"

5. 日历自动关闭，页面跳转到选中的日期

6. 横向日期条也会自动滚动到对应位置

**效果**：
- 快速跳转到任意日期
- 可以查看历史知识沉淀
- 比横向滑动更快捷

---

### 场景2：求助站 - 日期范围筛选

**目标**：筛选特定时间段内的求助帖子

1. 打开浏览器访问：http://localhost:3000/community

2. 在状态Tab下方，可以看到日期筛选器：
   ```
   📅 筛选时间段： [开始日期] - [结束日期] 📆
   ```

3. 点击日期筛选器区域

4. 日历弹窗显示，包含：
   - 顶部：日期范围输入框显示
   - 中间：快捷选项按钮
   - 下方：双月日历视图
   - 底部：取消和确定按钮

5. **方式A：使用快捷选项**
   - 点击"最近7天"按钮
   - 日期范围自动填充
   - 日历中对应日期高亮显示
   - 点击"确定"按钮

6. **方式B：手动选择日期**
   - 点击开始日期（例如：1月15日）
   - 再点击结束日期（例如：1月20日）
   - 范围内的日期会显示浅蓝色背景
   - 点击"确定"按钮

7. 筛选结果：
   - 帖子列表只显示该时间段内的帖子
   - 日期筛选器显示选中的日期范围
   - 出现"清除"按钮

8. 点击"清除"按钮取消筛选

**效果**：
- 精确筛选特定时间段的帖子
- 快捷选项提高效率
- 可以与状态筛选组合使用

---

## 功能对比

### 与参考图片的对比

| 功能 | 参考图片 | 我们的实现 | 状态 |
|------|---------|-----------|------|
| 双月视图 | ✅ | ✅ | 完全实现 |
| 日期范围选择 | ✅ | ✅ | 完全实现 |
| 快捷选项 | ✅ | ✅ | 完全实现 |
| 月份切换 | ✅ | ✅ | 完全实现 |
| 日期标记 | ❌ | ✅ | 增强功能 |
| 范围预览 | ❌ | ✅ | 增强功能 |
| 时间选择 | ✅ | ❌ | 未实现 |

### 增强功能

我们的实现相比参考图片增加了：

1. **有内容日期标记**
   - 底部显示橙色小圆点
   - 一眼看出哪些日期有数据

2. **范围悬停预览**
   - 鼠标悬停时预览选择范围
   - 更直观的交互体验

3. **今天标识**
   - 蓝色边框标识今天
   - 快速定位当前日期

4. **动画效果**
   - 淡入淡出动画
   - 悬停效果
   - 更流畅的体验

---

## 交互细节

### 日历操作

1. **选择日期**
   - 单击：选择日期
   - 悬停：高亮显示
   - 已选：蓝色背景

2. **范围选择**
   - 第一次点击：设置开始日期
   - 第二次点击：设置结束日期
   - 悬停：预览范围

3. **月份导航**
   - 点击 ‹ 按钮：上一个月
   - 点击 › 按钮：下一个月
   - 两个月同步切换

4. **关闭日历**
   - 点击"取消"按钮
   - 点击背景遮罩
   - 按ESC键（待实现）

### 快捷选项

| 选项 | 说明 | 示例 |
|------|------|------|
| 今天 | 当天 | 2026-02-02 |
| 昨天 | 前一天 | 2026-02-01 |
| 最近7天 | 过去7天 | 2026-01-27 ~ 2026-02-02 |
| 这个月 | 本月1号至今 | 2026-02-01 ~ 2026-02-02 |
| 上个月 | 上月全月 | 2026-01-01 ~ 2026-01-31 |
| 上个季度 | 上季度全季 | 2025-10-01 ~ 2025-12-31 |

---

## 样式说明

### 日期状态样式

```css
/* 普通日期 */
.day {
  background: white;
  color: #2c3e50;
}

/* 悬停状态 */
.day:hover {
  background: #f5f5f5;
}

/* 选中日期 */
.day.selected {
  background: #1a4d7a;  /* 深海蓝 */
  color: white;
}

/* 范围内日期 */
.day.inRange {
  background: rgba(26, 77, 122, 0.1);  /* 浅蓝色 */
  color: #1a4d7a;
}

/* 今天 */
.day.today {
  border: 2px solid #1a4d7a;
}

/* 有内容的日期 */
.day.hasContent::after {
  content: '';
  width: 4px;
  height: 4px;
  background: #f5a623;  /* 生财金 */
  border-radius: 50%;
}
```

### 航海主题配色

- **主色（深海蓝）**: #1a4d7a - 选中状态、边框
- **辅助色（生财金）**: #f5a623 - 内容标记
- **背景色（米白）**: #faf8f5 - 页面背景
- **文字色（深灰）**: #2c3e50 - 主要文字

---

## 使用技巧

### 1. 快速跳转到今天
- 点击"今天"快捷按钮
- 或在日历中找到蓝色边框的日期

### 2. 查看上个月的数据
- 点击"上个月"快捷按钮
- 自动选择上月全月范围

### 3. 查看最近一周
- 点击"最近7天"快捷按钮
- 包含今天在内的7天

### 4. 自定义范围
- 先点击开始日期
- 再点击结束日期
- 可以跨月选择

### 5. 清除筛选
- 点击"清除"按钮
- 恢复显示所有数据

---

## 常见问题

### Q1: 为什么有些日期是灰色的？
A: 灰色日期表示不在当前月份，属于上个月或下个月的日期。

### Q2: 如何选择跨月的日期范围？
A: 先选择开始日期，然后使用月份导航切换到目标月份，再选择结束日期。

### Q3: 快捷选项的日期范围是如何计算的？
A:
- "最近7天" = 今天往前推6天
- "这个月" = 本月1号到今天
- "上个月" = 上月1号到上月最后一天

### Q4: 可以选择未来的日期吗？
A: 可以，日历没有限制未来日期的选择。

### Q5: 如何取消已选择的日期？
A: 点击"清除"按钮或重新选择新的日期范围。

---

## 键盘快捷键（计划中）

| 按键 | 功能 |
|------|------|
| ESC | 关闭日历 |
| ← → | 切换月份 |
| ↑ ↓ | 选择日期 |
| Enter | 确认选择 |
| T | 跳转到今天 |

---

## 移动端适配

- 触摸友好的按钮大小
- 响应式布局
- 滑动切换月份（计划中）
- 底部弹出式日历（计划中）

---

## 性能说明

- 日期计算使用 date-fns 库，性能优秀
- 只渲染可见的日期
- 事件委托减少监听器数量
- CSS动画使用GPU加速

---

## 浏览器兼容性

- ✅ Chrome 90+
- ✅ Safari 14+
- ✅ Firefox 88+
- ✅ Edge 90+
- ✅ 移动端浏览器

---

## 更新计划

### 近期（1-2周）
- [ ] 添加键盘快捷键支持
- [ ] 移动端滑动切换月份
- [ ] 时间选择功能
- [ ] 自定义快捷选项

### 中期（1个月）
- [ ] 节假日标识
- [ ] 年份快速跳转
- [ ] 多语言支持
- [ ] 主题自定义

### 长期（2-3个月）
- [ ] 农历显示
- [ ] 事件标记
- [ ] 批量日期选择
- [ ] 日历导出功能
